{"eval":{"args":[{"ident":"parsed","type":"identifier"},{"ident":"original","type":"identifier"}],"function":{"ident":"is_eq","type":"identifier"},"type":"funcall"},"statements":[{"mutability":"let","initial":{"args":["parser.token.goo"],"function":{"ident":"import","type":"identifier"},"type":"funcall"},"name":"Token","type":"declvar"},{"mutability":"let","initial":{"args":["fizzbuzz.goo.json"],"function":{"ident":"import","type":"identifier"},"type":"funcall"},"name":"original","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"args":[42],"function":{"ident":"fatal","type":"identifier"},"type":"funcall"},"statements":[{"args":["[ERROR] ",{"ident":"fmt_str","type":"identifier"}],"function":{"ident":"print","type":"identifier"},"type":"funcall"}],"type":"scope"},"params":["fmt_str"],"type":"declfun"},"name":"error","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"type":"unit"},"statements":[{"mutability":"let","initial":{"args":[{"ident":"source","type":"identifier"}],"function":{"ident":"len","type":"identifier"},"type":"funcall"},"name":"length","type":"declvar"},{"mutability":"let","initial":{"elements":[],"type":"array"},"name":"tokens","type":"declvar"},{"mutability":"let mut","initial":0,"name":"i","type":"declvar"},{"mutability":"let","initial":"\t\r\n ","name":"WHITESPACE","type":"declvar"},{"mutability":"let","initial":{"body":{"rhs":{"ident":"length","type":"identifier"},"lhs":{"ident":"i","type":"identifier"},"op":"<"},"params":[],"type":"declfun"},"name":"not_eof","type":"declvar"},{"mutability":"let","initial":{"body":{"else":"","then":{"index":{"ident":"i","type":"identifier"},"object":{"ident":"source","type":"identifier"}},"condition":{"args":[],"function":{"ident":"not_eof","type":"identifier"},"type":"funcall"},"type":"if"},"params":[],"type":"declfun"},"name":"curr","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"statements":[{"rhs":{"rhs":1,"lhs":{"ident":"i","type":"identifier"},"op":"+"},"lhs":{"ident":"i","type":"identifier"},"op":"="}],"type":"scope"},"params":[],"type":"declfun"},"name":"next","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":"true","statements":[{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"expression":"false","type":"return"}],"type":"scope"},"condition":{"expr":{"args":[{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"}],"function":{"property":"is_digit","object":{"ident":"str","type":"identifier"}},"type":"funcall"},"op":"not"},"type":"if"},{"mutability":"let mut","initial":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"name":"num","type":"declvar"},{"do":{"eval":{"rhs":{"rhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"lhs":{"ident":"num","type":"identifier"},"op":"+"},"lhs":{"ident":"num","type":"identifier"},"op":"="},"statements":[],"type":"scope"},"condition":{"args":[{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"function":{"property":"is_digit","object":{"ident":"str","type":"identifier"}},"type":"funcall"},"type":"while"},{"else":{"type":"unit"},"then":{"eval":{"do":{"eval":{"rhs":{"rhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"lhs":{"ident":"num","type":"identifier"},"op":"+"},"lhs":{"ident":"num","type":"identifier"},"op":"="},"statements":[],"type":"scope"},"condition":{"args":[{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"function":{"property":"is_digit","object":{"ident":"str","type":"identifier"}},"type":"funcall"},"type":"while"},"statements":[{"rhs":{"rhs":".","lhs":{"ident":"num","type":"identifier"},"op":"+"},"lhs":{"ident":"num","type":"identifier"},"op":"="}],"type":"scope"},"condition":{"rhs":".","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},{"args":[{"ident":"tokens","type":"identifier"},{"args":[{"args":[{"ident":"num","type":"identifier"}],"function":{"property":"parse_number","object":{"ident":"str","type":"identifier"}},"type":"funcall"}],"function":{"property":"num","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"}],"type":"scope"},"params":[],"type":"declfun"},"name":"digit","type":"declvar"},{"mutability":"let","initial":{"body":{"else":{"eval":"false","statements":[],"type":"scope"},"then":{"eval":"true","statements":[{"mutability":"let","initial":"","name":"str_literal","type":"declvar"},{"do":{"eval":{"type":"unit"},"statements":[{"rhs":{"rhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"lhs":{"ident":"str_literal","type":"identifier"},"op":"+"},"lhs":{"ident":"str_literal","type":"identifier"},"op":"="}],"type":"scope"},"condition":{"expr":{"rhs":{"property":"quote","object":{"ident":"str","type":"identifier"}},"lhs":{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},"op":"=="},"op":"not"},"type":"while"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},{"args":[{"ident":"tokens","type":"identifier"},{"args":[{"ident":"str_literal","type":"identifier"}],"function":{"property":"string","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":{"property":"quote","object":{"ident":"str","type":"identifier"}},"lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"params":[],"type":"declfun"},"name":"string","type":"declvar"},{"do":{"eval":{"else":{"else":{"else":{"else":{"else":{"else":{"else":{"else":{"else":{"eval":{"type":"unit"},"statements":[{"args":[{"rhs":"'","lhs":{"rhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"lhs":"Invalid character: '","op":"+"},"op":"+"}],"function":{"ident":"error","type":"identifier"},"type":"funcall"}],"type":"scope"},"then":{"eval":{"type":"unit"},"statements":[],"type":"scope"},"condition":{"args":[],"function":{"ident":"string","type":"identifier"},"type":"funcall"},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[],"type":"scope"},"condition":{"args":[],"function":{"ident":"digit","type":"identifier"},"type":"funcall"},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"comma","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":",","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"colon","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":":","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"close_bracket","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":"]","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"open_bracket","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":"[","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"close_curly","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":"}","lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[{"ident":"tokens","type":"identifier"},{"args":[],"function":{"property":"open_curly","object":{"ident":"Token","type":"identifier"}},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":{"index":0,"object":"{{"},"lhs":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"args":[{"ident":"WHITESPACE","type":"identifier"},{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"}],"function":{"property":"contains","object":{"ident":"str","type":"identifier"}},"type":"funcall"},"type":"if"},"statements":[],"type":"scope"},"condition":{"args":[],"function":{"ident":"not_eof","type":"identifier"},"type":"funcall"},"type":"while"},{"expression":{"ident":"tokens","type":"identifier"},"type":"return"}],"type":"scope"},"params":["source"],"type":"declfun"},"name":"tokenize","type":"declvar"},{"mutability":"let","initial":{"args":[{"args":["fizzbuzz.goo.json"],"function":{"ident":"include_str","type":"identifier"},"type":"funcall"}],"function":{"ident":"tokenize","type":"identifier"},"type":"funcall"},"name":"toks","type":"declvar"},{"mutability":"let","initial":{"args":[{"ident":"toks","type":"identifier"}],"function":{"ident":"len","type":"identifier"},"type":"funcall"},"name":"tok_len","type":"declvar"},{"mutability":"let mut","initial":0,"name":"pos","type":"declvar"},{"mutability":"let","initial":{"body":{"index":{"ident":"pos","type":"identifier"},"object":{"ident":"toks","type":"identifier"}},"params":[],"type":"declfun"},"name":"curr","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"rhs":{"ident":"ty","type":"identifier"},"lhs":{"property":"type","object":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"}},"op":"=="},"statements":[],"type":"scope"},"params":["ty"],"type":"declfun"},"name":"is_curr","type":"declvar"},{"mutability":"let","initial":{"body":{"rhs":{"rhs":1,"lhs":{"ident":"pos","type":"identifier"},"op":"+"},"lhs":{"ident":"pos","type":"identifier"},"op":"="},"params":[],"type":"declfun"},"name":"next","type":"declvar"},{"mutability":"let","initial":{"body":{"else":{"else":{"eval":{"ident":"data","type":"identifier"},"statements":[{"mutability":"let","initial":{"property":"data","object":{"args":[],"function":{"ident":"curr","type":"identifier"},"type":"funcall"}},"name":"data","type":"declvar"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"then":{"eval":{"args":[],"function":{"ident":"array","type":"identifier"},"type":"funcall"},"statements":[],"type":"scope"},"condition":{"args":[{"property":"OPEN_BRACKET","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"type":"if"},"then":{"eval":{"args":[],"function":{"ident":"obj","type":"identifier"},"type":"funcall"},"statements":[],"type":"scope"},"condition":{"args":[{"property":"OPEN_CURLY","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"type":"if"},"params":[],"type":"declfun"},"name":"any","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"ident":"object","type":"identifier"},"statements":[{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},{"mutability":"let","initial":{"values":[],"type":"dictioanry"},"name":"object","type":"declvar"},{"do":{"eval":{"else":{"type":"unit"},"then":{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},"condition":{"args":[{"property":"COMMA","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"type":"if"},"statements":[{"mutability":"let","initial":{"args":[],"function":{"ident":"any","type":"identifier"},"type":"funcall"},"name":"key","type":"declvar"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},{"rhs":{"args":[],"function":{"ident":"any","type":"identifier"},"type":"funcall"},"lhs":{"index":{"ident":"key","type":"identifier"},"object":{"ident":"object","type":"identifier"}},"op":"="}],"type":"scope"},"condition":{"expr":{"args":[{"property":"CLOSE_CURLY","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"op":"not"},"type":"while"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"params":[],"type":"declfun"},"name":"obj","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"ident":"arr","type":"identifier"},"statements":[{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},{"mutability":"let","initial":{"elements":[],"type":"array"},"name":"arr","type":"declvar"},{"do":{"eval":{"else":{"type":"unit"},"then":{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"},"condition":{"args":[{"property":"COMMA","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"type":"if"},"statements":[{"args":[{"ident":"arr","type":"identifier"},{"args":[],"function":{"ident":"any","type":"identifier"},"type":"funcall"}],"function":{"ident":"push","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"expr":{"args":[{"property":"CLOSE_BRACKET","object":{"ident":"Token","type":"identifier"}}],"function":{"ident":"is_curr","type":"identifier"},"type":"funcall"},"op":"not"},"type":"while"},{"args":[],"function":{"ident":"next","type":"identifier"},"type":"funcall"}],"type":"scope"},"params":[],"type":"declfun"},"name":"array","type":"declvar"},{"mutability":"let","initial":{"args":[],"function":{"ident":"any","type":"identifier"},"type":"funcall"},"name":"parsed","type":"declvar"},{"mutability":"let","initial":{"body":{"eval":{"type":"unit"},"statements":[{"mutability":"let","initial":{"args":[],"function":{"body":{"eval":{"else":{"else":{"else":{"else":{"else":{"eval":{"type":"unit"},"statements":["false",{"expression":"false","type":"return"}],"type":"scope"},"then":{"eval":{"type":"unit"},"statements":[{"expression":"true","type":"return"}],"type":"scope"},"condition":{"rhs":{"ident":"b","type":"identifier"},"lhs":{"ident":"a","type":"identifier"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"args":[5],"function":{"ident":"print","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":{"rhs":"nil","lhs":{"ident":"ty","type":"identifier"},"op":"=="},"lhs":{"rhs":"unit","lhs":{"ident":"ty","type":"identifier"},"op":"=="},"op":"or"},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"args":[2],"function":{"ident":"print","type":"identifier"},"type":"funcall"},{"expression":"false","type":"return"}],"type":"scope"},"condition":{"rhs":{"args":[{"ident":"b","type":"identifier"}],"function":{"ident":"len","type":"identifier"},"type":"funcall"},"lhs":{"args":[{"ident":"a","type":"identifier"}],"function":{"ident":"len","type":"identifier"},"type":"funcall"},"op":"!="},"type":"if"},{"mutability":"let mut","initial":0,"name":"i","type":"declvar"},{"do":{"eval":{"rhs":{"rhs":1,"lhs":{"ident":"i","type":"identifier"},"op":"+"},"lhs":{"ident":"i","type":"identifier"},"op":"="},"statements":[{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"args":[3],"function":{"ident":"print","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"expr":{"args":[{"index":{"ident":"i","type":"identifier"},"object":{"ident":"a","type":"identifier"}},{"index":{"ident":"i","type":"identifier"},"object":{"ident":"b","type":"identifier"}}],"function":{"ident":"is_eq","type":"identifier"},"type":"funcall"},"op":"not"},"type":"if"}],"type":"scope"},"condition":{"rhs":{"args":[{"ident":"a","type":"identifier"}],"function":{"ident":"len","type":"identifier"},"type":"funcall"},"lhs":{"ident":"i","type":"identifier"},"op":"<"},"type":"while"}],"type":"scope"},"condition":{"rhs":"array","lhs":{"ident":"ty","type":"identifier"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[{"mutability":"let","initial":"true","name":"equals","type":"declvar"},{"args":[{"ident":"a","type":"identifier"},{"body":{"eval":{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"args":[1],"function":{"ident":"print","type":"identifier"},"type":"funcall"},{"rhs":"false","lhs":{"ident":"equals","type":"identifier"},"op":"="}],"type":"scope"},"condition":{"expr":{"args":[{"ident":"v","type":"identifier"},{"index":{"ident":"k","type":"identifier"},"object":{"ident":"b","type":"identifier"}}],"function":{"ident":"is_eq","type":"identifier"},"type":"funcall"},"op":"not"},"type":"if"},"statements":[],"type":"scope"},"params":["k","v"],"type":"declfun"}],"function":{"ident":"each","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"rhs":"object","lhs":{"ident":"ty","type":"identifier"},"op":"=="},"type":"if"},"then":{"eval":{"type":"unit"},"statements":[],"type":"scope"},"condition":{"rhs":{"args":[{"ident":"b","type":"identifier"}],"function":{"ident":"typeof","type":"identifier"},"type":"funcall"},"lhs":{"ident":"ty","type":"identifier"},"op":"!="},"type":"if"},"statements":[{"mutability":"let","initial":{"args":[{"ident":"a","type":"identifier"}],"function":{"ident":"typeof","type":"identifier"},"type":"funcall"},"name":"ty","type":"declvar"}],"type":"scope"},"params":[],"type":"declfun"},"type":"funcall"},"name":"result","type":"declvar"},{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"else":{"type":"unit"},"then":{"eval":{"type":"unit"},"statements":[{"expression":"true","type":"return"}],"type":"scope"},"condition":{"rhs":{"ident":"b","type":"identifier"},"lhs":{"ident":"a","type":"identifier"},"op":"=="},"type":"if"},{"args":[1],"function":{"ident":"fatal","type":"identifier"},"type":"funcall"}],"type":"scope"},"condition":{"expr":{"ident":"result","type":"identifier"},"op":"not"},"type":"if"},{"expression":{"ident":"result","type":"identifier"},"type":"return"}],"type":"scope"},"params":["a","b"],"type":"declfun"},"name":"is_eq","type":"declvar"},{"args":[{"ident":"parsed","type":"identifier"}],"function":{"ident":"print","type":"identifier"},"type":"funcall"}],"type":"scope"}